(this["webpackJsonpcountdown-timer"]=this["webpackJsonpcountdown-timer"]||[]).push([[0],[,,,,function(e,t,n){e.exports={timers:"Timers_timers__2Vo0k",appear:"Timers_appear__1xr_v",active:"Timers_active__2r0g6",event:"Timers_event__3p-wT",info:"Timers_info__2xN4I",name:"Timers_name__ZKxws",date:"Timers_date__3F5wA",countdown:"Timers_countdown__hMn9c",expired:"Timers_expired__1OT_b",disappear:"Timers_disappear__1DxJd"}},,function(e,t,n){e.exports={"new-timer":"NewTimer_new-timer__1e5yW",success:"NewTimer_success__e8PJQ",error:"NewTimer_error__39kg1",attention:"NewTimer_attention__2UxoF"}},function(e,t,n){e.exports={backdrop:"Modal_backdrop__1yEqW",modal:"Modal_modal__2zwpN",disappear:"Modal_disappear___4QyW"}},,,,,function(e,t,n){e.exports={"notification-status":"NotificationStatus_notification-status__2Y9-y",appear:"NotificationStatus_appear__1FtLB",disappear:"NotificationStatus_disappear__3dq0w"}},function(e,t,n){e.exports={app:"App_app__SVqVu"}},function(e,t,n){e.exports={alert:"Alert_alert__2RMFl"}},function(e,t,n){e.exports={"notification-request":"NotificationRequest_notification-request__215RE"}},,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),c=n(8),o=n.n(c),r=(n(21),n(13)),s=n.n(r),d=n(2),l=a.a.createContext(),j=n(7),u=n.n(j),b=n(0),m=function(e){return Object(b.jsx)("div",{className:e.visible?u.a.backdrop:"".concat(u.a.backdrop," ").concat(u.a.disappear),onClick:e.backDropClick})},f=function(e){return Object(b.jsxs)(b.Fragment,{children:[o.a.createPortal(Object(b.jsx)(m,{backDropClick:e.backDropClick,visible:e.visible}),document.getElementById("modal")),o.a.createPortal(Object(b.jsx)("div",{role:"dialog",id:"modal","aria-labelledby":"modal_label","aria-modal":"true",className:e.visible?u.a.modal:"".concat(u.a.modal," ").concat(u.a.disappear),children:e.children}),document.getElementById("modal"))]})},O=n(14),h=n.n(O),x=new Audio("beep-06.mp3"),p=function(){var e=Object(i.useContext)(l),t=e.hideAlert,n=e.lastEvent,a=Object(i.useState)(!0),c=Object(d.a)(a,2),o=c[0],r=c[1],s=Object(i.useRef)(),j=Object(i.useRef)(),u=Object(i.useCallback)((function(){"granted"===Notification.permission&&s.current.close(),r(!1);var e=setTimeout((function(){clearTimeout(e),t()}),500)}),[t]);return Object(i.useEffect)((function(){x.play(),"granted"===Notification.permission&&(s.current=new Notification("Event Countdown Timer",{body:"Event ".concat(n.name," completed.")}),s.current.onclose=function(){u()})}),[n,u]),Object(i.useEffect)((function(){setTimeout((function(){j.current.focus()}),1)})),Object(b.jsx)(f,{backDropClick:u,visible:o,children:Object(b.jsxs)("div",{className:h.a.alert,children:[Object(b.jsx)("h3",{children:"Event Date Reached"}),Object(b.jsxs)("p",{children:["Timer ",Object(b.jsx)("span",{children:n.name})," complete at"," ",Object(b.jsx)("span",{children:new Date(n.dateTime).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}),"."]}),Object(b.jsx)("button",{onClick:u,ref:j,children:"Dismiss"})]})})},v=n(5),_=n(3),g=n(6),N=n.n(g),T=function(){var e=Object(i.useContext)(l),t=e.addTimer,n=e.timers,a=e.alert,c=e.notificationModal,o=e.statusBar,r=Object(i.useState)(!1),s=Object(d.a)(r,2),j=s[0],u=s[1],m=Object(i.useState)(!1),f=Object(d.a)(m,2),O=f[0],h=f[1],x=Object(i.useState)(!1),p=Object(d.a)(x,2),g=p[0],T=p[1],w=Object(i.useState)(!1),S=Object(d.a)(w,2),y=S[0],E=S[1],D=Object(i.useState)(!1),k=Object(d.a)(D,2),C=k[0],F=k[1],I=Object(i.useRef)(),M=Object(i.useRef)(),B=function(){u(!1),h(!1),T(!1)};return Object(i.useEffect)((function(){a||c||setTimeout((function(){try{I.current.focus()}catch(e){console.log(e)}}),1)}),[a,c,o]),Object(b.jsxs)("div",{className:[N.a["new-timer"],C?N.a.success:void 0].join(" "),children:[Object(b.jsx)("h2",{children:"Create New Event Timer"}),Object(b.jsxs)("form",{name:"new-timer",onSubmit:function(e){e.preventDefault();var i=new FormData(e.target),a=i.get("name"),c=i.get("date"),o=i.get("time"),r=!1;a.trim().length>0&&a.trim().length<50?r=!0:u(!0),(o.trim().length<1||o.trim()<1)&&(o="00:00");var s=c.split("-"),d=o.split(":"),l=s.concat(d),j=!1;!isNaN(Object(v.a)(Date,Object(_.a)(l)))&&Object(v.a)(Date,Object(_.a)(l))>new Date?n.find((function(e){return new Date(e.dateTime).getTime()===Object(v.a)(Date,Object(_.a)(l)).getTime()}))?T(!0):j=!0:h(!0);r&&j?(t({name:a,dateTime:l}),e.target.reset(),I.current.focus(),F(!0),setTimeout((function(){F(!1)}),1e3)):M.current?(E(!0),setTimeout((function(){E(!1)}),500)):M.current=!0},children:[Object(b.jsx)("label",{htmlFor:"name",children:"Name"}),Object(b.jsx)("input",{id:"name",name:"name",type:"text",placeholder:"Name of the event",onFocus:B,tabIndex:a||c?"-1":"0",ref:I,autoComplete:"off"}),j&&Object(b.jsx)("div",{className:[N.a.error,y?N.a.attention:void 0].join(" "),children:"Name can't be empty nor too long."}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"date",children:"Date"}),Object(b.jsx)("input",{id:"date",name:"date",type:"date",onFocus:B,tabIndex:a||c?"-1":"0"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"time",children:"Time"}),Object(b.jsx)("input",{id:"time",name:"time",type:"time",onFocus:B,tabIndex:a||c?"-1":"0",step:"60"})]}),O&&Object(b.jsx)("div",{className:[N.a.error,y?N.a.attention:void 0].join(" "),children:"Date has to be set to the future."}),g&&Object(b.jsx)("div",{className:[N.a.error,y?N.a.attention:void 0].join(" "),children:"Can't set two events at the exactly the same time."}),Object(b.jsx)("button",{type:"submit",tabIndex:a||c?"-1":"0",children:C?"Added":"Start"})]})]})},w=n(15),S=n.n(w),y=function(){var e=Object(i.useContext)(l),t=e.notificationEnabled,n=e.hideNotificationModal,a=e.enableNotification,c=Object(i.useState)(!0),o=Object(d.a)(c,2),r=o[0],s=o[1],j=Object(i.useState)(!1),u=Object(d.a)(j,2),m=u[0],O=u[1],h=Object(i.useRef)();return Object(i.useEffect)((function(){setTimeout((function(){h.current.focus()}),1)})),Object(b.jsx)(f,{visible:r,children:Object(b.jsxs)("div",{className:S.a["notification-request"],children:[Object(b.jsx)("h3",{children:"Notification Control"}),t||m?"":Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{children:"This app uses browser notifications to notify when an timer is complete."}),Object(b.jsx)("p",{children:"Do you want to enable this feature?"})]}),!t&&m?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{children:"Ok! You won't receive browser notifications."})," ",Object(b.jsx)("p",{children:"If you change your mind, you can change the notification permission in your browser settings."})]}):"",t&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{children:"Notifications permissions were granted!"}),Object(b.jsx)("p",{children:"You will receive a notification when an event timer is complete."})]}),t||m?"":Object(b.jsx)("button",{onClick:function(){Notification.requestPermission().then((function(e){"granted"===e&&a(),"denied"===e&&O(!0)}))},children:"Enable"}),Object(b.jsx)("button",{onClick:function(){s(!1),setTimeout((function(){n()}),500)},ref:h,children:"Dismiss"})]})})},E=n(12),D=n.n(E),k=function(){var e=Object(i.useContext)(l),t=e.enableNotification,n=e.hideStatusBar,a=e.showStatusBar,c=Object(i.useState)(!0),o=Object(d.a)(c,2),r=o[0],s=o[1];return a&&Object(b.jsxs)("div",{className:"".concat(D.a["notification-status"]," ").concat(r?void 0:D.a.disappear),children:[Object(b.jsx)("div",{children:"Notifications are disabled."}),Object(b.jsx)("button",{onClick:function(){Notification.requestPermission().then((function(e){"granted"===e&&(s(!1),setTimeout((function(){t()}),500)),"denied"===e&&alert("Notifications are disabled. You can enable in your browser settings.")}))},children:"Enable"}),Object(b.jsx)("button",{onClick:function(){s(!1),setTimeout((function(){n()}),500)},children:"Dismiss"})]})},C=n(4),F=n.n(C),I=function(e){var t=e.timeLeft,n=Object(i.useContext)(l),a=n.handleLastEvent,c=n.showAlert,o=n.deleteTimer,r=n.notificationModal,s=n.alert,j=Object(i.useState)(!0),u=Object(d.a)(j,2),m=u[0],f=u[1],O=t,h=Math.floor(O%60);O/=60;var x=Math.floor(O%60);O/=60;var p=Math.floor(O%24);O/=24;var g=Math.floor(O),N=function(e){return e<10?"0".concat(e):e},T=Object(b.jsxs)(b.Fragment,{children:[g>0?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{children:N(g)})," days,"," "]}):"",p>0?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{children:N(p)})," hours,"," "]}):"",x>0?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{children:N(x)})," minutes,"," "]}):"",h>=0?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{children:N(h)})," seconds"]}):""]});if(t<1)var w=setTimeout((function(){clearTimeout(w),a(e),c()}),1e3);return Object(b.jsx)("li",{className:m?void 0:F.a.disappear,children:Object(b.jsxs)("div",{className:F.a.event,children:[Object(b.jsxs)("div",{className:F.a.info,children:[Object(b.jsx)("div",{className:F.a.name,children:e.name}),Object(b.jsx)("div",{className:F.a.date,children:Object(v.a)(Date,Object(_.a)(e.dateTime)).toLocaleString(void 0,{month:"short",year:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),Object(b.jsx)("button",{onClick:function(){f(!1),setTimeout((function(){o(e.id)}),500)},tabIndex:s||r?"-1":"0",children:"Delete"}),Object(b.jsx)("div",{className:F.a.countdown,children:T})]})})},M=function(){var e=Object(i.useContext)(l),t=e.timers,n=e.clearExpired,a=e.notificationModal,c=e.alert,o=Object(i.useState)(),r=Object(d.a)(o,2),s=r[0],j=r[1],u=Object(i.useState)(!0),m=Object(d.a)(u,2),f=m[0],O=m[1],h=function(e){return console.log(e),Math.floor((Object(v.a)(Date,Object(_.a)(e))-new Date)/1e3)},x=Object(_.a)(t).sort((function(e,t){return Object(v.a)(Date,Object(_.a)(e.dateTime))<Object(v.a)(Date,Object(_.a)(t.dateTime))?-1:1})).filter((function(e){return h(e.dateTime)>0})),p=t.filter((function(e){return h(e.dateTime)<0})).reverse().map((function(e){return Object(b.jsxs)("li",{children:[Object(b.jsx)("div",{className:F.a.name,children:e.name}),Object(b.jsx)("div",{className:F.a.date,children:Object(v.a)(Date,Object(_.a)(e.dateTime)).toLocaleString(void 0,{dateStyle:"long",timeStyle:"short"})})]},e.id)}));Object(i.useEffect)((function(){j(x.map((function(e){return Object(b.jsx)(I,{id:e.id,name:e.name,dateTime:e.dateTime,timeLeft:h(e.dateTime)},e.id)})))}),[t]),Object(i.useEffect)((function(){var e;return s&&s.length>0&&(e=setInterval((function(){j(x.map((function(e){return Object(b.jsx)(I,{id:e.id,name:e.name,dateTime:e.dateTime,timeLeft:h(e.dateTime)},e.id)})))}),1e3)),function(){clearInterval(e)}}),[s]);return Object(b.jsxs)("div",{className:F.a.timers,children:[Object(b.jsxs)("div",{className:F.a.active,children:[Object(b.jsx)("h2",{children:"Active Event Timers"}),0===(null===s||void 0===s?void 0:s.length)?Object(b.jsx)("p",{children:"Go ahead an add a timer for your event!"}):Object(b.jsx)("ul",{children:s})]}),Object(b.jsxs)("div",{className:F.a.expired,children:[Object(b.jsx)("h2",{children:"Expired Event Timers"}),0===p.length?Object(b.jsx)("p",{children:"Expired event timers will appear here."}):Object(b.jsx)("ul",{className:f?void 0:F.a.disappear,children:p}),Object(b.jsx)("button",{disabled:p.length<1,onClick:function(){O(!1),setTimeout((function(){n(),O(!0)}),500)},tabIndex:c||a?"-1":"0",children:"Clear expired timers"})]})]})};var B=function(){var e=Object(i.useContext)(l),t=e.notificationModal,n=e.alert,a=e.notificationEnabled,c=e.isLoaded,o=e.showStatusBar,r=e.statusBar;return Object(i.useEffect)((function(){document.getElementById("modal").style=n||t?"display: block":"display: none"}),[n,t]),Object(i.useEffect)((function(){a||t||!c||o()}),[a,t,c]),Object(b.jsxs)(b.Fragment,{children:[r?Object(b.jsx)(k,{}):"",Object(b.jsxs)("main",{className:s.a.app,children:[t&&Object(b.jsx)(y,{}),n&&Object(b.jsx)(p,{}),Object(b.jsx)(T,{}),Object(b.jsx)(M,{}),Object(b.jsx)("footer",{children:Object(b.jsx)("a",{href:"http://",children:"Source"})})]})]})},L=n(16),A=function(e){var t=Object(i.useState)([]),n=Object(d.a)(t,2),a=n[0],c=n[1],o=Object(i.useState)(!1),r=Object(d.a)(o,2),s=r[0],j=r[1],u=Object(i.useState)(),m=Object(d.a)(u,2),f=m[0],O=m[1],h=Object(i.useState)(!1),x=Object(d.a)(h,2),p=x[0],g=x[1],N=Object(i.useState)(!1),T=Object(d.a)(N,2),w=T[0],S=T[1],y=Object(i.useState)(!1),E=Object(d.a)(y,2),D=E[0],k=E[1],C=Object(i.useState)(!1),F=Object(d.a)(C,2),I=F[0],M=F[1];Object(i.useEffect)((function(){localStorage.getItem("timers")&&c(JSON.parse(localStorage.getItem("timers")));try{"default"===Notification.permission&&g(!0)}catch(e){console.log(e),S(!1)}try{"granted"===Notification.permission&&S(!0)}catch(e){console.log(e),S(!1)}k(!0)}),[]);var B={timers:a,addTimer:function(e){c((function(t){var n=[].concat(Object(_.a)(t),[Object(L.a)({id:t.length<1?0:t[t.length-1].id+1},e)]);return localStorage.setItem("timers",JSON.stringify(n)),n}))},alert:s,showAlert:function(){j(!0)},hideAlert:function(){j(!1)},lastEvent:f,handleLastEvent:function(e){O(e)},notificationModal:p,hideNotificationModal:function(){g(!1)},notificationEnabled:w,enableNotification:function(){S(!0)},isLoaded:D,clearExpired:function(){c((function(e){var t=e.filter((function(e){return Object(v.a)(Date,Object(_.a)(e.dateTime))>new Date}));return localStorage.setItem("timers",JSON.stringify(t)),t}))},deleteTimer:function(e){c((function(t){var n=t.filter((function(t){return t.id!==e}));return localStorage.setItem("timers",JSON.stringify(n)),n}))},statusBar:I,hideStatusBar:function(){M(!1)},showStatusBar:function(){try{Notification&&M(!0)}catch(e){M(!1)}}};return Object(b.jsx)(l.Provider,{value:B,children:e.children})};o.a.render(Object(b.jsx)(A,{children:Object(b.jsx)(B,{})}),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.37a4ad3d.chunk.js.map