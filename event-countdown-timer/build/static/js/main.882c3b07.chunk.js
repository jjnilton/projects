(this["webpackJsonpcountdown-timer"]=this["webpackJsonpcountdown-timer"]||[]).push([[0],[,,,function(e,t,n){e.exports={timers:"Timers_timers__2Vo0k",appear:"Timers_appear__1xr_v",active:"Timers_active__2r0g6",event:"Timers_event__3p-wT",info:"Timers_info__2xN4I",name:"Timers_name__ZKxws",date:"Timers_date__3F5wA",countdown:"Timers_countdown__hMn9c",expired:"Timers_expired__1OT_b",disappear:"Timers_disappear__1DxJd"}},function(e,t,n){e.exports={"new-timer":"NewTimer_new-timer__1e5yW",success:"NewTimer_success__e8PJQ",error:"NewTimer_error__39kg1",attention:"NewTimer_attention__2UxoF"}},function(e,t,n){e.exports={backdrop:"Modal_backdrop__1yEqW",modal:"Modal_modal__2zwpN",disappear:"Modal_disappear___4QyW"}},,,,,,function(e,t,n){e.exports={"notification-status":"NotificationStatus_notification-status__2Y9-y",appear:"NotificationStatus_appear__1FtLB",disappear:"NotificationStatus_disappear__3dq0w"}},function(e,t,n){e.exports={app:"App_app__SVqVu"}},function(e,t,n){e.exports={alert:"Alert_alert__2RMFl"}},function(e,t,n){e.exports={"notification-request":"NotificationRequest_notification-request__215RE"}},,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),c=n(6),r=n.n(c),o=(n(20),n(12)),s=n.n(o),d=n(2),l=a.a.createContext(),u=n(5),j=n.n(u),b=n(0),m=function(e){return Object(b.jsx)("div",{className:e.visible?j.a.backdrop:"".concat(j.a.backdrop," ").concat(j.a.disappear),onClick:e.backDropClick})},f=function(e){return Object(b.jsxs)(b.Fragment,{children:[r.a.createPortal(Object(b.jsx)(m,{backDropClick:e.backDropClick,visible:e.visible}),document.getElementById("modal")),r.a.createPortal(Object(b.jsx)("div",{role:"dialog",id:"modal","aria-labelledby":"modal_label","aria-modal":"true",className:e.visible?j.a.modal:"".concat(j.a.modal," ").concat(j.a.disappear),children:e.children}),document.getElementById("modal"))]})},O=n(13),h=n.n(O),x=new Audio("/beep-06.mp3"),p=function(){var e=Object(i.useContext)(l),t=e.hideAlert,n=e.lastEvent,a=Object(i.useState)(!0),c=Object(d.a)(a,2),r=c[0],o=c[1],s=Object(i.useRef)(),u=Object(i.useRef)(),j=Object(i.useCallback)((function(){"granted"===Notification.permission&&s.current.close(),o(!1);var e=setTimeout((function(){clearTimeout(e),t()}),500)}),[t]);return Object(i.useEffect)((function(){x.play(),"granted"===Notification.permission&&(s.current=new Notification("Event Countdown Timer",{body:"Event ".concat(n.name," completed.")}),s.current.onclose=function(){j()})}),[n,j]),Object(i.useEffect)((function(){setTimeout((function(){u.current.focus()}),1)})),Object(b.jsx)(f,{backDropClick:j,visible:r,children:Object(b.jsxs)("div",{className:h.a.alert,children:[Object(b.jsx)("h3",{children:"Event Date Reached"}),Object(b.jsxs)("p",{children:["Timer ",Object(b.jsx)("span",{children:n.name})," complete at"," ",Object(b.jsx)("span",{children:new Date(n.dateTime).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}),"."]}),Object(b.jsx)("button",{onClick:j,ref:u,children:"Dismiss"})]})})},v=n(4),_=n.n(v),g=function(){var e=Object(i.useContext)(l),t=e.addTimer,n=e.timers,a=e.alert,c=e.notificationModal,r=e.statusBar,o=Object(i.useState)(!1),s=Object(d.a)(o,2),u=s[0],j=s[1],m=Object(i.useState)(!1),f=Object(d.a)(m,2),O=f[0],h=f[1],x=Object(i.useState)(!1),p=Object(d.a)(x,2),v=p[0],g=p[1],T=Object(i.useState)(!1),N=Object(d.a)(T,2),w=N[0],S=N[1],y=Object(i.useState)(!1),E=Object(d.a)(y,2),D=E[0],k=E[1],C=Object(i.useRef)(),F=Object(i.useRef)(),I=function(){j(!1),h(!1),g(!1)};return Object(i.useEffect)((function(){a||c||setTimeout((function(){C.current.focus()}),1)}),[a,c,r]),Object(b.jsxs)("div",{className:[_.a["new-timer"],D?_.a.success:void 0].join(" "),children:[Object(b.jsx)("h2",{children:"Create New Event Timer"}),Object(b.jsxs)("form",{name:"new-timer",onSubmit:function(e){e.preventDefault();var i=new FormData(e.target),a=i.get("name"),c=i.get("date"),r=i.get("time"),o=!1;a.trim().length>0&&a.trim().length<50?o=!0:j(!0),(r.trim().length<1||r.trim()<1)&&(r="00:00");var s="".concat(c," ").concat(r).trim(),d=!1;!isNaN(new Date(s))&&new Date(s)>new Date?n.find((function(e){return new Date(e.dateTime).getTime()===new Date(s).getTime()}))?g(!0):d=!0:h(!0);o&&d?(t({name:a,dateTime:s}),e.target.reset(),C.current.focus(),k(!0),setTimeout((function(){k(!1)}),1e3)):F.current?(S(!0),setTimeout((function(){S(!1)}),500)):F.current=!0},children:[Object(b.jsx)("label",{htmlFor:"name",children:"Name"}),Object(b.jsx)("input",{id:"name",name:"name",type:"text",placeholder:"Name of the event",onFocus:I,tabIndex:a||c?"-1":"0",ref:C}),u&&Object(b.jsx)("div",{className:[_.a.error,w?_.a.attention:void 0].join(" "),children:"Name can't be empty nor too long."}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"date",children:"Date"}),Object(b.jsx)("input",{id:"date",name:"date",type:"date",onFocus:I,tabIndex:a||c?"-1":"0"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"time",children:"Time"}),Object(b.jsx)("input",{id:"time",name:"time",type:"time",onFocus:I,tabIndex:a||c?"-1":"0"})]}),O&&Object(b.jsx)("div",{className:[_.a.error,w?_.a.attention:void 0].join(" "),children:"Date has to be set to the future."}),v&&Object(b.jsx)("div",{className:[_.a.error,w?_.a.attention:void 0].join(" "),children:"Can't set two events at the exactly the same time."}),Object(b.jsx)("button",{type:"submit",tabIndex:a||c?"-1":"0",children:D?"Added":"Start"})]})]})},T=n(14),N=n.n(T),w=function(){var e=Object(i.useContext)(l),t=e.notificationEnabled,n=e.hideNotificationModal,a=e.enableNotification,c=Object(i.useState)(!0),r=Object(d.a)(c,2),o=r[0],s=r[1],u=Object(i.useState)(!1),j=Object(d.a)(u,2),m=j[0],O=j[1],h=Object(i.useRef)();return Object(i.useEffect)((function(){setTimeout((function(){h.current.focus()}),1)})),Object(b.jsx)(f,{visible:o,children:Object(b.jsxs)("div",{className:N.a["notification-request"],children:[Object(b.jsx)("h3",{children:"Notification Control"}),t||m?"":Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{children:"This app uses browser notifications to notify when an timer is complete."}),Object(b.jsx)("p",{children:"Do you want to enable this feature?"})]}),!t&&m?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{children:"Ok! You won't receive browser notifications."})," ",Object(b.jsx)("p",{children:"If you change your mind, you can change the notification permission in your browser settings."})]}):"",t&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{children:"Notifications permissions were granted!"}),Object(b.jsx)("p",{children:"You will receive a notification when an event timer is complete."})]}),t||m?"":Object(b.jsx)("button",{onClick:function(){Notification.requestPermission().then((function(e){"granted"===e&&a(),"denied"===e&&O(!0)}))},children:"Enable"}),Object(b.jsx)("button",{onClick:function(){s(!1),setTimeout((function(){n()}),500)},ref:h,children:"Dismiss"})]})})},S=n(11),y=n.n(S),E=function(){var e=Object(i.useContext)(l),t=e.enableNotification,n=e.hideStatusBar,a=e.showStatusBar,c=Object(i.useState)(!0),r=Object(d.a)(c,2),o=r[0],s=r[1];return a&&Object(b.jsxs)("div",{className:"".concat(y.a["notification-status"]," ").concat(o?void 0:y.a.disappear),children:[Object(b.jsx)("div",{children:"Notifications are disabled."}),Object(b.jsx)("button",{onClick:function(){Notification.requestPermission().then((function(e){"granted"===e&&(s(!1),setTimeout((function(){t()}),500)),"denied"===e&&alert("Notifications are disabled. You can enable in your browser settings.")}))},children:"Enable"}),Object(b.jsx)("button",{onClick:function(){s(!1),setTimeout((function(){n()}),500)},children:"Dismiss"})]})},D=n(9),k=n(3),C=n.n(k),F=function(e){var t=e.timeLeft,n=Object(i.useContext)(l),a=n.handleLastEvent,c=n.showAlert,r=n.deleteTimer,o=n.notificationModal,s=n.alert,u=Object(i.useState)(!0),j=Object(d.a)(u,2),m=j[0],f=j[1],O=t,h=Math.floor(O%60);O/=60;var x=Math.floor(O%60);O/=60;var p=Math.floor(O%24);O/=24;var v=Math.floor(O),_=function(e){return e<10?"0".concat(e):e},g=Object(b.jsxs)(b.Fragment,{children:[v>0?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{children:_(v)})," days,"," "]}):"",p>0?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{children:_(p)})," hours,"," "]}):"",x>0?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{children:_(x)})," minutes,"," "]}):"",h>=0?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{children:_(h)})," seconds"]}):""]});if(t<1)var T=setTimeout((function(){clearTimeout(T),a(e),c()}),1e3);return Object(b.jsx)("li",{className:m?void 0:C.a.disappear,children:Object(b.jsxs)("div",{className:C.a.event,children:[Object(b.jsxs)("div",{className:C.a.info,children:[Object(b.jsx)("div",{className:C.a.name,children:e.name}),Object(b.jsx)("div",{className:C.a.date,children:new Date(e.dateTime).toLocaleString(void 0,{month:"short",year:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),Object(b.jsx)("button",{onClick:function(){f(!1),setTimeout((function(){r(e.id)}),500)},tabIndex:s||o?"-1":"0",children:"Delete"}),Object(b.jsx)("div",{className:C.a.countdown,children:g})]})})},I=function(){var e=Object(i.useContext)(l),t=e.timers,n=e.clearExpired,a=e.notificationModal,c=e.alert,r=Object(i.useState)(),o=Object(d.a)(r,2),s=o[0],u=o[1],j=Object(i.useState)(!0),m=Object(d.a)(j,2),f=m[0],O=m[1],h=function(e){return Math.floor((new Date(e)-new Date)/1e3)},x=Object(D.a)(t).sort((function(e,t){return new Date(e.dateTime)<new Date(t.dateTime)?-1:1})).filter((function(e){return h(e.dateTime)>0})),p=t.filter((function(e){return h(e.dateTime)<0})).reverse().map((function(e){return Object(b.jsxs)("li",{children:[Object(b.jsx)("div",{className:C.a.name,children:e.name}),Object(b.jsx)("div",{className:C.a.date,children:new Date(e.dateTime).toLocaleString(void 0,{dateStyle:"long",timeStyle:"short"})})]},e.id)}));Object(i.useEffect)((function(){u(x.map((function(e){return Object(b.jsx)(F,{id:e.id,name:e.name,dateTime:e.dateTime,timeLeft:h(e.dateTime)},e.id)})))}),[t]),Object(i.useEffect)((function(){var e;return s&&s.length>0&&(e=setInterval((function(){u(x.map((function(e){return Object(b.jsx)(F,{id:e.id,name:e.name,dateTime:e.dateTime,timeLeft:h(e.dateTime)},e.id)})))}),1e3)),function(){clearInterval(e)}}),[s]);return Object(b.jsxs)("div",{className:C.a.timers,children:[Object(b.jsxs)("div",{className:C.a.active,children:[Object(b.jsx)("h2",{children:"Active Event Timers"}),0===(null===s||void 0===s?void 0:s.length)?Object(b.jsx)("p",{children:"Go ahead an add a timer for your event!"}):Object(b.jsx)("ul",{children:s})]}),Object(b.jsxs)("div",{className:C.a.expired,children:[Object(b.jsx)("h2",{children:"Expired Event Timers"}),0===p.length?Object(b.jsx)("p",{children:"Expired event timers will appear here."}):Object(b.jsx)("ul",{className:f?void 0:C.a.disappear,children:p}),Object(b.jsx)("button",{disabled:p.length<1,onClick:function(){O(!1),setTimeout((function(){n(),O(!0)}),500)},tabIndex:c||a?"-1":"0",children:"Clear expired timers"})]})]})};var M=function(){var e=Object(i.useContext)(l),t=e.notificationModal,n=e.alert,a=e.notificationEnabled,c=e.isLoaded,r=e.showStatusBar,o=e.statusBar;return Object(i.useEffect)((function(){document.getElementById("modal").style=n||t?"display: block":"display: none"}),[n,t]),Object(i.useEffect)((function(){a||t||!c||r()}),[a,t,c]),Object(b.jsxs)(b.Fragment,{children:[o?Object(b.jsx)(E,{}):"",Object(b.jsxs)("main",{className:s.a.app,children:[t&&Object(b.jsx)(w,{}),n&&Object(b.jsx)(p,{}),Object(b.jsx)(g,{}),Object(b.jsx)(I,{}),Object(b.jsx)("footer",{children:Object(b.jsx)("a",{href:"http://",children:"Source"})})]})]})},B=n(15),L=function(e){var t=Object(i.useState)([]),n=Object(d.a)(t,2),a=n[0],c=n[1],r=Object(i.useState)(!1),o=Object(d.a)(r,2),s=o[0],u=o[1],j=Object(i.useState)(),m=Object(d.a)(j,2),f=m[0],O=m[1],h=Object(i.useState)(!1),x=Object(d.a)(h,2),p=x[0],v=x[1],_=Object(i.useState)(!1),g=Object(d.a)(_,2),T=g[0],N=g[1],w=Object(i.useState)(!1),S=Object(d.a)(w,2),y=S[0],E=S[1],k=Object(i.useState)(!1),C=Object(d.a)(k,2),F=C[0],I=C[1];Object(i.useEffect)((function(){localStorage.getItem("timers")&&c(JSON.parse(localStorage.getItem("timers"))),"default"===Notification.permission&&v(!0),"granted"===Notification.permission&&N(!0),E(!0)}),[]);var M={timers:a,addTimer:function(e){c((function(t){var n=[].concat(Object(D.a)(t),[Object(B.a)({id:t.length<1?0:t[t.length-1].id+1},e)]);return localStorage.setItem("timers",JSON.stringify(n)),n}))},alert:s,showAlert:function(){u(!0)},hideAlert:function(){u(!1)},lastEvent:f,handleLastEvent:function(e){O(e)},notificationModal:p,hideNotificationModal:function(){v(!1)},notificationEnabled:T,enableNotification:function(){N(!0)},isLoaded:y,clearExpired:function(){c((function(e){var t=e.filter((function(e){return new Date(e.dateTime)>new Date}));return localStorage.setItem("timers",JSON.stringify(t)),t}))},deleteTimer:function(e){c((function(t){var n=t.filter((function(t){return t.id!==e}));return localStorage.setItem("timers",JSON.stringify(n)),n}))},statusBar:F,hideStatusBar:function(){I(!1)},showStatusBar:function(){I(!0)}};return Object(b.jsx)(l.Provider,{value:M,children:e.children})};r.a.render(Object(b.jsx)(L,{children:Object(b.jsx)(M,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.882c3b07.chunk.js.map